<!-- Alert Message Component -->
<% 
  const alertClass = (typeof type !== 'undefined' && type === 'error') || (typeof type !== 'undefined' && type === 'danger') ? 'alert-danger' : 
                     (typeof type !== 'undefined' && type === 'success') ? 'alert-success' : 
                     (typeof type !== 'undefined' && type === 'warning') ? 'alert-warning' : 
                     'alert-info';
  
  const iconMap = {
    'error': '❌',
    'danger': '❌', 
    'success': '✅',
    'warning': '⚠️',
    'info': 'ℹ️'
  };
  
  const alertIcon = (typeof icon !== 'undefined' && icon) ? icon : iconMap[(typeof type !== 'undefined' && type) ? type : 'info'] || 'ℹ️';
%>

<div class="alert <%= alertClass %> <%= (typeof dismissible !== 'undefined' && dismissible) ? 'alert-dismissible' : '' %> <%= (typeof extraClass !== 'undefined' && extraClass) ? extraClass : '' %>" 
     <% if (typeof id !== 'undefined' && id) { %>id="<%= id %>"<% } %>
     <% if (typeof hidden !== 'undefined' && hidden) { %>style="display: none;"<% } %>>
  
  <% if (typeof dismissible !== 'undefined' && dismissible) { %>
    <button type="button" class="btn-close" aria-label="Close" onclick="this.parentElement.style.display='none'"></button>
  <% } %>
  
  <div class="alert-content">
    <% if (typeof title !== 'undefined' && title) { %>
      <h5 class="alert-title">
        <%= alertIcon %> <%= title %>
      </h5>
    <% } else { %>
      <%= alertIcon %> 
    <% } %>
    
    <span class="alert-message"><%= message %></span>
    
    <% if (typeof details !== 'undefined' && details) { %>
      <div class="alert-details mt-2">
        <small class="text-muted"><%= details %></small>
      </div>
    <% } %>
  </div>
</div>

<style>
.alert {
  padding: 15px 20px;
  margin-bottom: 20px;
  border: 1px solid transparent;
  border-radius: 8px;
  position: relative;
}

.alert-info {
  background-color: #e7f3ff;
  border-color: #3b82f6;
  color: #1e40af;
}

.alert-success {
  background-color: #ecfdf5;
  border-color: #10b981;
  color: #047857;
}

.alert-warning {
  background-color: #fffbeb;
  border-color: #f59e0b;
  color: #d97706;
}

.alert-danger {
  background-color: #fef2f2;
  border-color: #ef4444;
  color: #dc2626;
}

.alert-dismissible {
  padding-right: 50px;
}

.btn-close {
  position: absolute;
  top: 15px;
  right: 15px;
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: inherit;
  opacity: 0.6;
}

.btn-close:hover {
  opacity: 1;
}

.alert-title {
  margin: 0 0 8px 0;
  font-weight: 600;
}

.alert-content {
  display: flex;
  flex-direction: column;
}

.alert-message {
  flex: 1;
}
</style>