<% /*
  Reusable Loading Button Component

  Props:
  - id: Unique button ID - REQUIRED
  - text: Button text - REQUIRED
  - loadingText: Text to show while loading (default: "Φόρτωση...")
  - type: Button type (default: "submit")
  - cssClass: CSS classes (default: "btn btn-primary")
  - icon: Emoji/icon before text (optional)
  - loadingIcon: Icon while loading (default: "⏳")

  Note: You need to add a small script to trigger loading when attached to a form
*/ %>

<button type="<%= typeof type !== 'undefined' ? type : 'submit' %>" class="<%= typeof cssClass !== 'undefined' ? cssClass : 'btn btn-primary' %>" id="<%= id %>">
  <span class="btn-content">
    <% if (typeof icon !== 'undefined' && icon) { %>
      <%= icon %> 
    <% } %>
    <%= text %>
  </span>
  <span class="btn-loading" style="display: none;">
    <%= typeof loadingIcon !== 'undefined' ? loadingIcon : '⏳' %> 
    <%= typeof loadingText !== 'undefined' ? loadingText : 'Φόρτωση...' %>
  </span>
</button>

<script>
  // Auto-attach loading functionality if in a form
  (function() {
    const btn = document.getElementById('<%= id %>');
    if (btn && btn.form) {
      btn.form.addEventListener('submit', function() {
        btn.disabled = true;
        btn.querySelector('.btn-content').style.display = 'none';
        btn.querySelector('.btn-loading').style.display = 'inline';
      });
    }
  })();
  
  // Global function to toggle loading state manually
  window.toggleLoadingButton = function(btnId, loading) {
    const btn = document.getElementById(btnId);
    if (btn) {
      btn.disabled = loading;
      btn.querySelector('.btn-content').style.display = loading ? 'none' : 'inline';
      btn.querySelector('.btn-loading').style.display = loading ? 'inline' : 'none';
    }
  };
</script>
